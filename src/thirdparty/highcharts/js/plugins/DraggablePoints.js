/**
 * Draggable points plugin
 * Author: Torstein Honsi
 * License: MIT License
 *
 */
!function(e){function o(e,o,t){var a=o.options,i=s(a["dragMin"+t],void 0),r=s(a["dragMax"+t],void 0);return i>e?e=i:e>r&&(e=r),e}var t=e.addEvent,a=e.each,s=e.pick;e.Chart.prototype.callbacks.push(function(e){function a(o){var t,a=e.hoverPoint,s=o.originalEvent||o;a&&(t=a.series.options,t.draggableX&&(r=a,n=s.changedTouches?s.changedTouches[0].pageX:o.pageX,g=r.plotX),t.draggableY&&(r=a,d=s.changedTouches?s.changedTouches[0].pageY:o.pageY,h=r.plotY+(e.plotHeight-(r.yBottom||e.plotHeight))),r&&(e.mouseIsDown=!1))}function s(t){if(t.preventDefault(),r){var a,s=t.originalEvent||t,p=s.changedTouches?s.changedTouches[0].pageX:t.pageX,c=s.changedTouches?s.changedTouches[0].pageY:t.pageY,l=d-c,u=n-p,v=r.series.options.draggableX,y=r.series.options.draggableY,x=r.series,b="bubble"===x.type||"scatter"===x.type,f=b?g-u:g-u-r.series.xAxis.minPixelPadding,T=e.plotHeight-h+l,X=void 0===n?r.x:r.series.xAxis.translate(f,!0),Y=void 0===d?r.y:r.series.yAxis.translate(T,!0);X=o(X,x,"X"),Y=o(Y,x,"Y"),r.firePointEvent("drag",{newX:v?X:r.x,newY:y?Y:r.y},function(){a=!0,r.update({x:v?X:r.x,y:y?Y:r.y},!1),x.halo&&(x.halo=x.halo.destroy()),e.tooltip&&e.tooltip.refresh(e.tooltip.shared?[r]:r),x.stackKey?e.redraw():x.redraw()}),a||i()}}function i(t){if(r){if(t){var a=t.originalEvent||t,s=a.changedTouches?a.changedTouches[0].pageX:t.pageX,i=a.changedTouches?a.changedTouches[0].pageY:t.pageY,p=r.series.options.draggableX,c=r.series.options.draggableY,l=n-s,u=d-i,v=r.series,y="bubble"===v.type||"scatter"===v.type,x=y?g-l:g-l-r.series.xAxis.minPixelPadding,b=e.plotHeight-h+u,f=void 0===n?r.x:r.series.xAxis.translate(x,!0),T=void 0===d?r.y:r.series.yAxis.translate(b,!0);f=o(f,v,"X"),T=o(T,v,"Y"),r.update({x:p?f:r.x,y:c?T:r.y})}r.firePointEvent("drop")}r=n=d=void 0}var r,n,d,g,h,p=e.container;e.redraw(),t(p,"mousemove",s),t(p,"touchmove",s),t(p,"mousedown",a),t(p,"touchstart",a),t(document,"mouseup",i),t(document,"touchend",i),t(p,"mouseleave",i)}),e.wrap(e.seriesTypes.column.prototype,"drawTracker",function(e){var o=this,t=o.options;e.apply(o),(t.draggableX||t.draggableY)&&a(o.points,function(e){e.graphic.attr(e.shapeArgs.height<3?{stroke:"black","stroke-width":2,dashstyle:"shortdot"}:{"stroke-width":o.options.borderWidth,dashstyle:o.options.dashStyle||"solid"})})})}(Highcharts);